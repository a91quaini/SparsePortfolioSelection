% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils_simulations.R
\name{compute_span_sr_index}
\alias{compute_span_sr_index}
\title{Sharpe-based systematic spanning index for a selected subset}
\usage{
compute_span_sr_index(
  mu_pop,
  sigma_pop,
  selection,
  sys = c("factors", "pca"),
  params = NULL,
  pca_loadings = NULL,
  m = NULL,
  ridge_epsilon = 0,
  do_checks = FALSE,
  return_details = FALSE
)
}
\arguments{
\item{mu_pop}{Population mean vector of the N assets.}

\item{sigma_pop}{Population covariance matrix of the N assets.}

\item{selection}{Integer vector of 1-based indices for the selected subset A.}

\item{sys}{Character; "factors" or "pca".}

\item{params}{List from calibrate_ff3(), required if sys = "factors".}

\item{pca_loadings}{N x m matrix of PCA portfolio weights (columns), required if sys = "pca".}

\item{m}{Number of systematic proxies to use (default: all columns / all factors).}

\item{ridge_epsilon}{Optional ridge added to the augmented covariance for stability.}

\item{do_checks}{Logical; validate inputs.}

\item{return_details}{Logical; include theta^2 components if TRUE.}
}
\value{
Either scalar SpanSR, or list with SpanSR and components if return_details=TRUE.
}
\description{
Computes a ratio-based "SpanSR" index for a selected subset A of assets:
SpanSR(A) = theta^2(A) / theta^2(A augmented with systematic proxies),
where theta^2(X) = mu_X' Sigma_X^{-1} mu_X is the \emph{population} max squared Sharpe
over the opportunity set X. By construction SpanSR(A) is in (0,1] (up to numerical
issues), and approaches 1 when A already spans the systematic proxies in the
mean--variance sense.
}
\details{
Two choices of systematic proxies:
\itemize{
\item sys = "factors": uses true FF factors from params (factor premia/vol + betas).
\item sys = "pca": uses PCA portfolios g_t = M' r_t with user-supplied loadings M.
}
}
